function init(e){"use strict";let t={empty:function(e){let t=e.childNodes.length;for(;t--;)e.removeChild(e.lastChild)},insertAfter:function(e,t){const{parentNode:n,nextSibling:r}=t;r?n.insertBefore(e,r):n.appendChild(e)},replace:function(e,n){t.insertAfter(n,e),e.remove()}};t.component=function(e,n,{mapUpdate:r}={}){let s=null;const o=document.createDocumentFragment();let l,c=[],i=0,a=[];return u(e,n),{add:u,component:function({mount:e,update:t,isStatic:n},r=0){d(r),c[i]=e(c[p()]),n()||(s||(s=h()),s.registerComponent(t));i+=1},mount:f,update:g,share:{mount:f,update:g,destroy:function(){return l.remove(),null},isStatic:function(){return!s}}};function u(e,n,r=0){d(r),n=n||{};const a=document.createElement(e);i?c[i]=c[p()].appendChild(a):l=c[0]=o.appendChild(a);let u=c[i];return n.onupdate&&(s||(s=h()),function(e,t){const n=Object.keys(t);for(let r,s,o=0,l=n.length;o<l;o++)switch(r=n[o],s=t[r],r){case"style":if("string"==typeof s)e[r]=s;else{"object"!=typeof e[r]&&(e[r]={});for(let t,n=0,o=Object.keys(s),l=o.length;n<l;n++)t=o[n],e[r][t]=s[t]}break;case"style_vars":case"dataset":"object"!=typeof e[r]&&(e[r]={});for(let t,n=0,o=Object.keys(s),l=o.length;n<l;n++)t=o[n],e[r][t]=s[t];break;default:e[r]=s}}(n,s.register(u,...n.onupdate)),delete n.onupdate),i++,t.assign(u,n),u}function f(e,n="childLast"){switch(n){case"replace":t.replace(e,o);break;case"replaceContent":t.empty(e),e.appendChild(o);break;case"before":e.parentNode.insertBefore(o,e);break;case"after":t.insertAfter(o,e);break;default:"childFirst"===n&&e.childNodes.length?e.insertBefore(o,e.childNodes[0]):e.appendChild(o)}return l}function d(e){e?(a.splice(a.length+1+e),a[a.length-1]=i):a.push(i)}function p(){return a[a.length-2]}function h(){const e={},n=[],s=new Map,o=new Map,l=new Map;let c=0;return{register:function(t,n,r){Object.assign(e,n);const i=c++;s.set(i,t);const a=Object.keys(n);for(let e,t=0,n=a.length;t<n;t++)e=a[t],l.has(e)?l.set(e,[...l.get(e),i]):l.set(e,[i]);return o.set(i,r),r.call(t,n)||{}},registerComponent:function(e){-1===n.indexOf(e)&&n.push(e)},update:function(c){const a="function"==typeof r?r(c):c;let u=!1;for(let e=0,t=n.length;e<t;e++)n[e](a)&&!u&&(u=!0);if(!l.size)return u;const f=Object.keys(a).filter(t=>l.has(t)&&e[t]!==a[t]),d=f.length;if(!d)return u;Object.assign(e,a);const p=[];for(let e,t=0;t<d;t++)for(let n,r=0,s=(e=l.get(f[t])).length;r<s;r++)n=e[r],-1===p.indexOf(n)&&p.push(n);for(let e=0,t=p.length;e<t;e++)h(p[e]);return!0;function h(n){const r=o.get(n).call(s.get(n),e)||{},l=s.get(n);if(null===l.parentNode)return i(n,f);t.assign(l,r)}},unregister:i};function i(e,t){o.delete(e),s.delete(e);for(let e,r,s=0,o=t.length;s<o;s++)e=t[s],1===(r=l.get(e)).length?l.delete(e):l.set(e,r.filter(n));function n(t){return t!==e}}}function g(e){return!!s&&s.update(e)}},t.assign=function(e,t){const n=Object.keys(t);for(let r,s,o=0,l=n.length;o<l;o++)switch(s=t[r=n[o]],r){case"style":if("string"==typeof s)e.setAttribute("style",s);else for(let t,n=0,r=Object.keys(s),o=r.length;n<o;n++)t=r[n],e.style.setProperty(t,s[t]);break;case"style_vars":for(let t,n=0,r=Object.keys(s),o=r.length;n<o;n++)t=r[n],e.style.setProperty(t,s[t]);break;case"dataset":for(let t,n=0,r=Object.keys(s),o=r.length;n<o;n++)t=r[n],e.dataset[t]=s[t];break;case"href":e.setAttribute(r,s);break;default:e[r]=s}},e.$dom=t}init(window);